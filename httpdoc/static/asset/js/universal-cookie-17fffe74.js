import{p as f,s}from"./cookie-4e3b67e1.js";function a(){return typeof document=="object"&&typeof document.cookie=="string"}function h(t,e){return typeof t=="string"?f(t,e):typeof t=="object"&&t!==null?t:{}}function u(t,e){return typeof e>"u"&&(e=!t||t[0]!=="{"&&t[0]!=="["&&t[0]!=='"'),!e}function c(t,e){e===void 0&&(e={});var i=p(t);if(u(i,e.doNotParse))try{return JSON.parse(i)}catch{}return t}function p(t){return t&&t[0]==="j"&&t[1]===":"?t.substr(2):t}var r=globalThis&&globalThis.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},r.apply(this,arguments)},g=function(){function t(e,i){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=h(e,i),new Promise(function(){n.HAS_DOCUMENT_COOKIE=a()}).catch(function(){})}return t.prototype._updateBrowserValues=function(e){!this.HAS_DOCUMENT_COOKIE||(this.cookies=f(document.cookie,e))},t.prototype._emitChange=function(e){for(var i=0;i<this.changeListeners.length;++i)this.changeListeners[i](e)},t.prototype.get=function(e,i,n){return i===void 0&&(i={}),this._updateBrowserValues(n),c(this.cookies[e],i)},t.prototype.getAll=function(e,i){e===void 0&&(e={}),this._updateBrowserValues(i);var n={};for(var o in this.cookies)n[o]=c(this.cookies[o],e);return n},t.prototype.set=function(e,i,n){var o;typeof i=="object"&&(i=JSON.stringify(i)),this.cookies=r(r({},this.cookies),(o={},o[e]=i,o)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=s(e,i,n)),this._emitChange({name:e,value:i,options:n})},t.prototype.remove=function(e,i){var n=i=r(r({},i),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=r({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=s(e,"",n)),this._emitChange({name:e,value:void 0,options:i})},t.prototype.addChangeListener=function(e){this.changeListeners.push(e)},t.prototype.removeChangeListener=function(e){var i=this.changeListeners.indexOf(e);i>=0&&this.changeListeners.splice(i,1)},t}();const _=g;export{_ as C};
